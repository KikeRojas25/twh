
<div class="flex flex-col flex-auto min-w-0">


  <div class="flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between p-6 sm:py-8 sm:px-10 border-b bg-card dark:bg-transparent">
    <div class="flex-1 min-w-0">
      <div  class="flex flex-wrap items-center font-medium">
        <div>
          <a  class="whitespace-nowrap text-primary-500">TWH</a>
        </div>
        <div class="flex items-center ml-1 whitespace-nowrap">
              <mat-icon
              class="fuse-horizontal-navigation-item-icon"
              [svgIcon]="'heroicons_solid:chevron-right'"></mat-icon>
              <a  class="ml-1 text-primary-500">Listado de ORI</a>
          </div>
      </div>
          <div class="mt-2"><h2  class="text-3xl md:text-4xl font-extrabold tracking-tight leading-7 sm:leading-10 truncate">  Equipos de transporte   </h2>
      </div>
  </div>
  </div>


 
  <div class="grid grid-cols-1 sm:grid-cols-4 gap-6 p-6 sm:py-8 sm:px-10 border-b bg-card dark:bg-transparent">
  
    <div class="flex flex-col">
      <label class="block text-lg font-semibold text-gray-800 dark:text-gray-200">Almacén</label>
      <p-dropdown [options]="almacenes" [(ngModel)]="model.AlmacenId" 
      [style]="{'width': '100%'}" 
      [resetFilterOnHide]="true"
      [hideTransitionOptions]="'0ms'"
      [showTransitionOptions]="'0ms'"
      [filter]="true"
      filterBy="label" 
      [showClear]="true" 
      placeholder="Selecciona un almacén" class="w-60">

        <ng-template let-item pTemplate="selectedItem">
          <span style="vertical-align:left;">{{item.label}}</span>
      </ng-template>

      </p-dropdown>
    </div>


  <!-- OC Field -->
  <div class="flex flex-col">
    <label class="block text-lg font-semibold text-gray-800 dark:text-gray-200">Propietario</label>

      <p-dropdown name="clientes" 
      [options]="clientes" 
      [resetFilterOnHide]="true"
      [(ngModel)]="model.PropietarioId" 
      [filter]="true"
      filterBy="label" 
      [showClear]="true" 
      [style]="{'width': '100%'}" 
      [hideTransitionOptions]="'0ms'"
      [showTransitionOptions]="'0ms'"
         placeholder="Selecciona un propietario" 
        >
        <ng-template let-item pTemplate="selectedItem">
          <span style="vertical-align:left;">{{item.label}}</span>
      </ng-template>

      
      </p-dropdown>
  </div>
  <div class="flex flex-col">
    <label class="block text-lg font-semibold text-gray-800 dark:text-gray-200">Estado</label>
      <p-dropdown [options]="estados"  [(ngModel)]="model.EstadoId"
      scrollHeight="40vh" class="input-form-field  col-sm-5"    [style]="{'width':'100%'}"  [resetFilterOnHide]="true"
      [hideTransitionOptions]="'0ms'"
      [showTransitionOptions]="'0ms'"
      placeholder="Todos"
      filter="false">
          <ng-template let-item pTemplate="selectedItem">
              <span style="vertical-align:middle;">{{item.label}}</span>
          </ng-template>
      </p-dropdown>
  </div>

  


  <div class="flex flex-col">
    <p-button severity="primary" icon="fa fa-search" label="Buscar" (onClick)="buscar()" > </p-button>

  </div> 

 




</div>
    <!-- Buscar Button -->
   

  
  <div class="flex flex-col p-6 sm:py-8 sm:px-10 border-b bg-card dark:bg-transparent">

  
        <p-table [style]="{width:'100%'}"
           [scrollable]="true" [columns]="cols" [value]="transportes"
             #dt [paginator]="true"
           [rows]="40" [resizableColumns]="true"  [responsive]="true"  >

             <ng-template pTemplate="colgroup" let-columns>
               <colgroup>
                   <col *ngFor="let col of columns"   [ngStyle]="{'width': col.width}" >
               </colgroup>
           </ng-template>
             <ng-template pTemplate="header" let-columns>
               <tr>
                   <th  [ngStyle]="{'width': col.width}" *ngFor="let col of columns" pResizableColumn [pSortableColumn]="col.field">
                       {{col.header}}
                       <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
                   </th>
               </tr>
           </ng-template>
             <ng-template pTemplate="body" let-rowData let-columns="columns">
               <tr  [pSelectableRow]="rowData">
                   <td class="ui-resizable-column">
                     <div class="ui-inputgroup">
                      <button [disabled]="rowData.estado == 'Cerrado' || rowData.estado == 'Asignado'"  class="btn btn-space btn-outline-primary" ngbTooltip="Asignar Puerta" (click)="openDoor(rowData.id, rowData.almacenId)" type="button"><i class="fas fa-door-closed"></i></button>
                      <button [disabled]="rowData.estado == 'Cerrado' || rowData.estado == 'Llegada'" class="btn btn-space btn-outline-primary" ngbTooltip="Descargar" (click)="openEquipoTransporte(rowData.id)" type="button"><i class="fas fa-truck-loading"></i></button>
                     </div>
                 </td>
                 <td class="ui-resizable-column"> {{rowData.almacen  }}</td>
                   <td class="ui-resizable-column"> {{rowData.equipoTransporte  }}</td>
                   <td class="ui-resizable-column"> {{rowData.puerta}} </td>

                   <td class="ui-resizable-column"> {{rowData.placa  }} </td>
                   <td class="ui-resizable-column"> {{rowData.marca  }}  </td>
                   <td class="ui-resizable-column"> {{rowData.tipoVehiculo  }}  </td>

                   <td  [ngClass]="rowData.estado == 'Llegada' ? 'old-car'
                   :  (rowData.estado == 'Asignado'?' very-old-car': null) "> {{rowData.estado}}</td>

               </tr>
               </ng-template>

           </p-table>

</div>





<p-confirmDialog />
<p-toast />





